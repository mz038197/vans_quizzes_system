# 程式碼排序題型排版優化

## 更新日期
2025-10-20

## 更新內容

針對程式碼排序題型的顯示排版進行了全面優化，確保老師和學生看到的界面一致且美觀。

## 主要改進

### 1. 學生答題界面改進

#### 可選程式碼塊
- ✅ 改進程式碼塊的陰影效果，增加視覺層次感
- ✅ 優化字體大小為 14px，提高可讀性
- ✅ 程式碼標籤（A、B、C...）顯示更清晰，加粗並使用品牌色
- ✅ 改進懸停效果，提供更好的互動反饋

#### 答題區
- ✅ 優化答案槽的視覺設計
- ✅ 改進拖放後的程式碼塊顯示
- ✅ 刪除按鈕改為圓形設計，並加入懸停動畫效果
- ✅ 為刪除按鈕預留足夠空間，避免與程式碼內容重疊

### 2. 老師查看題目界面改進

#### 統一排版
- ✅ 老師查看題目時的排版與學生答題界面完全一致
- ✅ 左側顯示所有可選程式碼塊
- ✅ 右側顯示答題區及正確答案

#### 答案顯示
- ✅ 在答題區中直接顯示正確答案
- ✅ 正確答案以綠色邊框標示，易於辨識
- ✅ 在每個答案前顯示綠色勾號和標籤（✓ A、✓ B 等）
- ✅ 保持與學生界面相同的視覺風格

### 3. CSS 樣式優化

#### 程式碼塊樣式
```css
.code-block {
    background: #2d3748;
    color: #e2e8f0;
    padding: 0.8rem 1rem;
    margin: 0.5rem 0;
    border-radius: 6px;
    font-family: 'Courier New', monospace;
    cursor: move;
    transition: transform 0.2s, box-shadow 0.2s;
    user-select: none;
    position: relative;
    white-space: pre-wrap;
    line-height: 1.5;
    font-size: 14px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
```

#### 標題樣式
- 統一字體大小為 1rem
- 使用適當的顏色區分不同區域
- 保持清晰的層次結構

#### 響應式設計
- 在小屏幕上（<768px）自動切換為垂直排列
- 調整最小高度以適應不同設備

## 視覺對比

### 老師查看題目
```
┌────────────────────────┬────────────────────────┐
│   可選程式碼塊         │   答題區（含答案）      │
│                        │                        │
│  A  def hello():       │  ┌─────────────────┐  │
│  B      print("Hi")    │  │ 1  ✓ A def...   │  │
│  C  hello()            │  └─────────────────┘  │
│                        │  ┌─────────────────┐  │
│                        │  │ 2  ✓ B print... │  │
│                        │  └─────────────────┘  │
│                        │  ┌─────────────────┐  │
│                        │  │ 3  ✓ C hello... │  │
│                        │  └─────────────────┘  │
└────────────────────────┴────────────────────────┘
```

### 學生答題界面
```
┌────────────────────────┬────────────────────────┐
│   可選程式碼塊         │   答題區               │
│                        │                        │
│  A  def hello():       │  ┌─────────────────┐  │
│  B      print("Hi")    │  │ 1  [空白]       │  │
│  C  hello()            │  └─────────────────┘  │
│                        │  ┌─────────────────┐  │
│  （可拖拉）            │  │ 2  [空白]       │  │
│                        │  └─────────────────┘  │
│                        │  ┌─────────────────┐  │
│                        │  │ 3  [空白]       │  │
│                        │  └─────────────────┘  │
└────────────────────────┴────────────────────────┘
```

## 技術細節

### 修改的檔案
1. `templates/manage_quiz_bank.html`
   - 重構老師查看題目時的 parsons 題型顯示
   - 使用與學生界面相同的排版結構
   - 在答題區顯示正確答案

2. `templates/take_quiz.html`
   - 優化刪除按鈕樣式和互動效果
   - 改進拖放後的視覺反饋

3. `static/css/style.css`
   - 改進 `.code-block` 樣式
   - 優化 `.parsons-bank` 和 `.parsons-target` 標題樣式
   - 改進答案槽中程式碼塊的顯示
   - 增強響應式設計

### 新增的 CSS 類
- `.parsons-preview-container` - 老師預覽容器
- `.parsons-preview-bank` - 老師預覽程式碼庫
- `.parsons-preview-target` - 老師預覽答題區
- `.code-block-preview` - 預覽用程式碼塊
- `.answer-slot-preview` - 預覽用答案槽
- `.answer-block` - 答案區中的程式碼塊

## 使用者體驗改進

### 學生
1. **更清晰的標籤顯示**
   - 每個程式碼塊都有明顯的標籤（A、B、C...）
   - 標籤使用品牌色並加粗，易於識別

2. **更好的拖放體驗**
   - 拖放時有平滑的動畫效果
   - 放入答案槽後有視覺反饋
   - 刪除按鈕更美觀且易於點擊

3. **一致的視覺風格**
   - 所有程式碼塊使用相同的深色背景
   - 統一的陰影效果增加立體感
   - 清晰的區域劃分

### 老師
1. **直觀的答案展示**
   - 答案直接顯示在答題區中
   - 綠色邊框標示正確答案
   - 與學生界面保持一致，便於理解題目難度

2. **完整的題目預覽**
   - 可以看到所有可選的程式碼塊
   - 清楚了解需要多少個答案槽
   - 快速檢查答案設置是否正確

## 瀏覽器兼容性

- ✅ Chrome/Edge（最新版本）
- ✅ Firefox（最新版本）
- ✅ Safari（最新版本）
- ✅ 支援觸控設備的拖放操作

## 測試建議

1. **視覺檢查**
   - 檢查老師查看題目時的顯示是否正確
   - 確認學生答題界面的排版清晰
   - 驗證程式碼標籤顯示正確

2. **功能測試**
   - 測試拖放功能是否正常
   - 檢查刪除按鈕是否可用
   - 驗證答案提交和評分正確

3. **響應式測試**
   - 在不同屏幕尺寸下測試顯示
   - 檢查手機和平板設備上的體驗
   - 確認小屏幕下的垂直排列正常

## 注意事項

- 舊格式的 parsons 題目仍然兼容
- 所有現有功能保持不變
- 僅改進了視覺展示和用戶體驗

---

更新日期：2025-10-20

